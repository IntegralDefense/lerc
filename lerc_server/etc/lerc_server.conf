<VirtualHost 0.0.0.0:443>
    ServerName <here>
    SSLEngine On
    SSLVerifyDepth 2
    SSLCertificateFile
    SSLCertificateKeyFile
    SSLCertificateChainFile
    SSLCACertificateFile

    WSGIDaemonProcess control_server user= group= threads=2
    WSGIScriptAlias / /opt/lerc_server/lerc_server.wsgi
    WSGIChunkedRequest On

    <Directory /opt/lerc_server/>
        WSGIProcessGroup control_server
        WSGIApplicationGroup %{GLOBAL}
        WSGIScriptReloading On
        Allow from all
        Require all granted
        SSLVerifyClient require
        SSLRequire %{SSL_CLIENT_S_DN_CN} eq "what you got?"
    </Directory>
</VirtualHost>

<VirtualHost 0.0.0.0:443>
    ServerName <here>
    SSLEngine On
    SSLVerifyDepth 2
    SSLCertificateFile
    SSLCertificateKeyFile
    SSLCertificateChainFile
    SSLCACertificateFile

    WSGIDaemonProcess server user= group= threads=5
    WSGIScriptAlias / /opt/lerc_server/lerc_server.wsgi
    WSGIChunkedRequest On

    <Directory /opt/lerc_server/>
        WSGIProcessGroup server
        WSGIApplicationGroup %{GLOBAL}
        WSGIScriptReloading On
        Allow from all
        Require all granted
        SSLVerifyClient require
    </Directory>
    <Location /command>
        Order allow,deny
        Deny from all
        #SSLVerifyClient require
        #SSLRequire %{SSL_CLIENT_S_DN_CN} eq "got any more?"
        #SSLCertificateFile 
        #SSLCertificateKeyFile 
    </Location>
    <Location /fetch>
        SSLVerifyClient require
    </Location>
    <Location /download>
        SSLVerifyClient require
    </Location>
    <Location /upload>
        SSLVerifyClient require
    </Location>
    <Location /pipe>
        SSLVerifyClient require
    </Location>
    <Location /error>
        SSLVerifyClient require
    </Location>
</VirtualHost>
